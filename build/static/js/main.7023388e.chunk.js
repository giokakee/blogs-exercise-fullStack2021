(this.webpackJsonpblogreact=this.webpackJsonpblogreact||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(17),c=n.n(a),i=(n(22),n(2)),u=n.n(i),l=n(4),o=n(3),j=(n(24),n(25),n(26),n(0)),d=function(e){var t=e.handleRegister,n=e.name,r=e.setName,s=e.username,a=e.setUsername,c=e.password,i=e.setPassword,u=e.registerVisible,l=e.loginVisible,o=e.cancel;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{className:"registerName",children:[Object(j.jsx)("input",{required:!0,className:"registerName-input",type:"text",name:"name",value:n,onChange:function(e){var t=e.target;return r(t.value)}}),Object(j.jsx)("label",{className:"registerName-label",children:Object(j.jsx)("span",{className:"registerName-span",children:"name"})})]}),Object(j.jsxs)("div",{className:"registerUsername",children:[Object(j.jsx)("input",{required:!0,className:"registerUsername-input",name:"username",value:s,onChange:function(e){var t=e.target;return a(t.value)}}),Object(j.jsx)("label",{className:"registerUsername-label",children:Object(j.jsx)("span",{className:"registerUsername-span",children:"username"})})]}),Object(j.jsxs)("div",{className:"registerPassword",children:[Object(j.jsx)("input",{required:!0,className:"registerPassword-input",type:"password",name:"password",value:c,onChange:function(e){var t=e.target;return i(t.value)}}),Object(j.jsx)("label",{className:"registerPassword-label",children:Object(j.jsx)("span",{className:"registerPassword-span",children:"password"})})]}),Object(j.jsx)("button",{type:"submit",children:" Register"}),Object(j.jsx)("div",{style:{display:u||l?"":"none"},children:Object(j.jsx)("button",{className:"cancel",onClick:o,children:"Cansel"})})]})},b=function(e){var t=e.handleLogin,n=e.username,r=e.setUsername,s=e.password,a=e.setPassword,c=e.registerVisible,i=e.loginVisible,u=e.cancel;return Object(j.jsxs)("form",{onSubmit:t,className:"loginForm",children:[Object(j.jsxs)("div",{className:"loginUsername",children:[Object(j.jsx)("input",{required:!0,className:"loginUsername-input",name:"username",value:n,onChange:function(e){var t=e.target;return r(t.value)}}),Object(j.jsx)("label",{className:"loginUsername-label",children:Object(j.jsx)("span",{className:"loginUsername-span",children:"username"})})]}),Object(j.jsxs)("div",{className:"loginPassword",children:[Object(j.jsx)("input",{required:!0,className:"loginPassword-input",type:"password",name:"password",value:s,onChange:function(e){var t=e.target;return a(t.value)}}),Object(j.jsx)("label",{className:"loginPassword-label",children:Object(j.jsx)("span",{className:"loginPassword-span",children:"password"})})]}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"submit",children:"Login"}),Object(j.jsx)("div",{style:{display:c||i?"":"none"},children:Object(j.jsx)("button",{className:"cancel",onClick:u,children:"Cansel"})})]})},p=n(6),m=n.n(p),f=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=m.a.post("/api/users",t),e.abrupt("return",n);case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return","registered error");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),h="/api/blogs",x=null,v={getAll:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(h);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,m.a.post(h,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){x="bearer ".concat(e)},deleteBlog:function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(h,"/").concat(t,"/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),update:function(e,t){return m.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},findOne:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(h,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),unlike:function(e,t){return m.a.put("".concat(h,"/").concat(e,"/unlike"),t).then((function(e){return e.data}))}},g=n(7);var k=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(""),c=Object(o.a)(a,2),i=c[0],p=c[1],m=Object(r.useState)(""),h=Object(o.a)(m,2),x=h[0],k=h[1],w=Object(r.useState)(!1),N=Object(o.a)(w,2),y=N[0],C=N[1],S=Object(r.useState)(!1),U=Object(o.a)(S,2),P=U[0],T=U[1],D=Object(r.useState)(!0),L=Object(o.a)(D,2),V=L[0],B=L[1],I=Object(r.useState)(!0),q=Object(o.a)(I,2),F=q[0],R=q[1],A=Object(r.useState)(!1),J=Object(o.a)(A,2),z=J[0],E=J[1],M=Object(r.useState)(null),Y=Object(o.a)(M,2),G=Y[0],H=Y[1],K=Object(r.useState)(null),Q=Object(o.a)(K,2),W=Q[0],X=Q[1],Z=Object(r.useState)(null),$=Object(o.a)(Z,2),_=$[0],ee=$[1],te=Object(r.useState)([]),ne=Object(o.a)(te,2),re=ne[0],se=ne[1],ae=Object(r.useState)(""),ce=Object(o.a)(ae,2),ie=ce[0],ue=ce[1],le=Object(r.useState)(""),oe=Object(o.a)(le,2),je=oe[0],de=oe[1],be=Object(r.useState)(""),pe=Object(o.a)(be,2),me=pe[0],fe=pe[1],Oe=Object(r.useState)(!1),he=Object(o.a)(Oe,2),xe=he[0],ve=he[1],ge=Object(r.useState)(!1),ke=Object(o.a)(ge,2),we=ke[0],Ne=ke[1],ye=Object(r.useState)(!0),Ce=Object(o.a)(ye,2),Se=Ce[0],Ue=Ce[1];Object(r.useEffect)((function(){Te()}),[]);var Pe=Se?re:re.filter((function(e){return e.user.username===G.username}));Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);H(t),v.setToken(t.token),R(!1),E(!0)}}),[]);var Te=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.getAll();case 3:t=e.sent,se(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message,"  this is fucking error message");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),De=function(){C(!1),T(!1),B(!0),R(!0),E(!1),H(null),X(""),s(""),p(""),k(""),de(""),ue(""),fe(""),window.localStorage.clear()},Le=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,r={name:n,username:i,password:x},i&&n){e.next=6;break}return setTimeout((function(){X(null)}),3e3),e.abrupt("return",X("Please fill out fields"));case 6:if(!(x.length<=5)){e.next=9;break}return setTimeout((function(){X(null)}),3e3),e.abrupt("return",X("Password must be minimum 5 characters"));case 9:return e.next=11,O(r);case 11:De(),setTimeout((function(){ee(null)}),3e3),ee("You registered succesfuly"),e.next=23;break;case 16:e.prev=16,e.t0=e.catch(1),setTimeout((function(){X(null)}),3e3),X("This username already exists"),s(""),p(""),k("");case 23:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f({username:i,password:x});case 4:if(n=e.sent,p(""),k(""),void 0!==n){e.next=10;break}return setTimeout((function(){X(null)}),3e3),e.abrupt("return",X("Invalid username or password"));case 10:R(!1),E(!0),v.setToken(n.token),window.localStorage.setItem("loggedUser",JSON.stringify(n)),H(n),p(""),k(""),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),p(""),k("");case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={blog:je,title:ie,author:me},e.prev=1,e.next=4,v.create(t);case 4:Te(),ue(""),de(""),fe(""),ve(!1),Ne(!1),ee("added successfully"),setTimeout((function(){ee(null)})),e.next=22;break;case 14:e.prev=14,e.t0=e.catch(1),"Request failed with status code 404"===e.t0.message&&(X("Time expired"),setTimeout((function(){X(null)}),3e3)),ue(""),de(""),fe(""),X("Please fill out fields"),setTimeout((function(){X(null)}),3e3);case 22:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){De()},qe=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.deleteBlog(t,n);case 3:Te(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),setTimeout((function(){X(null)}),3e3),X("error");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),Fe=function(e){if(G&&e.user.username===G.username)return Object(j.jsx)("div",{className:"deleteDiv",children:Object(j.jsx)("button",{onClick:function(){return qe(e.id,G.token)},children:"delete"})})},Re=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.likerUsers.push(G.id);case 2:return e.next=4,v.update(t.id,{like:t.likes,token:G.token});case 4:return Te(),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("start"),e.next=3,t.likerUsers.filter((function(e){return e!==G.id}));case 3:return t.likerUsers=e.sent,console.log("middle"),e.next=7,v.unlike(t.id,{like:t.likes,token:G.token});case 7:return console.log("end"),Te(),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsxs)("div",{children:[W?Object(j.jsxs)("div",{className:"errorDiv",children:[" ",Object(j.jsx)("p",{className:"errorMessage",children:W})]}):null,_?Object(j.jsx)("div",{className:"succesDiv",children:Object(j.jsx)("p",{className:"succesMessage",children:_})}):null]}),Object(j.jsxs)("div",{className:"formDiv",style:{display:F?"":"none"},children:[Object(j.jsx)("div",{className:"logo"}),Object(j.jsxs)("div",{className:"formsDivInside",children:[Object(j.jsx)("div",{style:{display:V?"":"none"},children:Object(j.jsx)("button",{onClick:function(){T(!0),C(!1),B(!1)},children:"Register"})}),Object(j.jsx)("div",{style:{display:V?"":"none"},children:Object(j.jsx)("button",{onClick:function(){C(!0),T(!1),B(!1)},children:"Login"})}),Object(j.jsx)("div",{style:{display:y?"":"none"},children:Object(j.jsx)(b,{registerVisible:P,loginVisible:y,cancel:Ie,username:i,password:x,handleLogin:Ve,setUsername:p,setPassword:k})}),Object(j.jsx)("div",{style:{display:P?"":"none"},children:Object(j.jsx)(d,{registerVisible:P,loginVisible:y,cancel:Ie,name:n,username:i,password:x,handleRegister:Le,setName:s,setUsername:p,setPassword:k})})]})]}),Object(j.jsxs)("div",{className:"loginedUserDiv",style:{display:z?"":"none"},children:[Object(j.jsxs)("div",{className:"userNameDiv",children:[Object(j.jsx)("div",{className:"logo"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"loggedIn",children:[Object(j.jsxs)("p",{children:[G?G.name:null," is logged in"]}),Object(j.jsx)("p",{className:"username",children:G?G.username:null}),Object(j.jsx)("button",{onClick:function(){ve(!0),Ne(!1)},children:"Create Your Blog"}),Object(j.jsx)("button",{onClick:function(){Ue(!1)},children:"show your blog"}),Object(j.jsx)("button",{onClick:function(){Ue(!0)},children:"show all"})]}),Object(j.jsx)("button",{onClick:De,children:"Log out"})]})]}),Object(j.jsxs)("div",{className:"createBlogDiv",children:[Object(j.jsxs)("div",{style:{display:xe?"":"none"},children:[Object(j.jsx)("input",{placeholder:"Title",name:"title",value:ie,onChange:function(e){var t=e.target;return ue(t.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:function(){ve(!1),Ne(!0)},children:"Next"}),Object(j.jsx)("button",{onClick:function(){return ve(!1)},children:"Cancel"})]}),Object(j.jsxs)("div",{style:{display:we?"":"none"},children:[Object(j.jsx)("textarea",{rows:"10",cols:"30",placeholder:"Blog",name:"blog",value:je,onChange:function(e){var t=e.target;return de(t.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:Be,children:"add"}),Object(j.jsx)("button",{onClick:function(){Ne(!1),ve(!1)},children:"Cansel"})]})]})]}),Object(j.jsx)("div",{className:"blogsDiv1",children:Object(j.jsx)("ul",{children:Pe.map((function(e){return Object(j.jsx)("div",{className:"blogsDiv",children:Object(j.jsxs)("li",{className:"blogsList",children:[Fe(e),Object(j.jsx)("p",{className:"title",children:e.title}),Object(j.jsx)("p",{className:"blog",children:e.blog}),Object(j.jsxs)("div",{className:"likesDiv",children:[Object(j.jsxs)("div",{className:"likesDiv1",children:[G?e.likerUsers.includes(G.id)?Object(j.jsx)("p",{className:"unlike",onClick:function(){return Ae(e)},children:Object(j.jsx)(g.a,{size:"30px",color:"red"})}):Object(j.jsx)("p",{className:"like",onClick:function(){return Re(e)},children:Object(j.jsx)(g.b,{size:"30px"})}):"",Object(j.jsxs)("p",{className:"likes",children:[e.likes,"  likes"]})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("p",{className:"author",children:["author ",e.user.username]})})]})]},e.id)},e.id)}))})})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root")),w()}},[[46,1,2]]]);
//# sourceMappingURL=main.7023388e.chunk.js.map