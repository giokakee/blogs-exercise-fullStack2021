(this.webpackJsonpblogreact=this.webpackJsonpblogreact||[]).push([[0],{21:function(e,t,n){},23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(16),c=n.n(s),u=(n(21),n(2)),i=n.n(u),o=n(4),l=n(3),j=(n(23),n(0)),b=function(e){var t=e.handleRegister,n=e.name,r=e.setName,a=e.username,s=e.setUsername,c=e.password,u=e.setPassword;return Object(j.jsxs)("form",{onSubmit:t,children:["name",Object(j.jsx)("input",{type:"text",name:"name",value:n,onChange:function(e){var t=e.target;return r(t.value)}}),Object(j.jsx)("br",{}),"username",Object(j.jsx)("input",{name:"username",value:a,onChange:function(e){var t=e.target;return s(t.value)}}),Object(j.jsx)("br",{}),"password",Object(j.jsx)("input",{type:"password",name:"password",value:c,onChange:function(e){var t=e.target;return u(t.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"submit",children:" Register"})]})},d=function(e){var t=e.handleLogin,n=e.username,r=e.setUsername,a=e.password,s=e.setPassword;return Object(j.jsxs)("form",{onSubmit:t,children:["username",Object(j.jsx)("input",{name:"username",value:n,onChange:function(e){var t=e.target;return r(t.value)}}),Object(j.jsx)("br",{}),"password",Object(j.jsx)("input",{type:"password",name:"password",value:a,onChange:function(e){var t=e.target;return s(t.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"submit",children:" Login"})]})},p=n(6),f=n.n(p),O=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=f.a.post("/api/users",t),e.abrupt("return",n);case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return","registered error");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),h="/api/blogs",m=null,x={getAll:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(h);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:m}},e.next=3,f.a.post(h,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){m="bearer ".concat(e)},deleteBlog:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(h,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return f.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}};var g=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(l.a)(s,2),u=c[0],p=c[1],f=Object(r.useState)(""),h=Object(l.a)(f,2),m=h[0],g=h[1],w=Object(r.useState)(!1),y=Object(l.a)(w,2),k=y[0],N=y[1],S=Object(r.useState)(!1),C=Object(l.a)(S,2),T=C[0],D=C[1],L=Object(r.useState)(!0),P=Object(l.a)(L,2),B=P[0],I=P[1],U=Object(r.useState)(!0),R=Object(l.a)(U,2),A=R[0],E=R[1],F=Object(r.useState)(!1),J=Object(l.a)(F,2),M=J[0],Y=J[1],z=Object(r.useState)(null),q=Object(l.a)(z,2),G=q[0],H=q[1],K=Object(r.useState)(null),Q=Object(l.a)(K,2),V=Q[0],W=Q[1],X=Object(r.useState)(null),Z=Object(l.a)(X,2),$=Z[0],_=Z[1],ee=Object(r.useState)([]),te=Object(l.a)(ee,2),ne=te[0],re=te[1],ae=Object(r.useState)(""),se=Object(l.a)(ae,2),ce=se[0],ue=se[1],ie=Object(r.useState)(""),oe=Object(l.a)(ie,2),le=oe[0],je=oe[1],be=Object(r.useState)(""),de=Object(l.a)(be,2),pe=de[0],fe=de[1],Oe=Object(r.useState)(!1),ve=Object(l.a)(Oe,2),he=ve[0],me=ve[1],xe=Object(r.useState)(!1),ge=Object(l.a)(xe,2),we=ge[0],ye=ge[1],ke=Object(r.useState)(!0),Ne=Object(l.a)(ke,2),Se=Ne[0],Ce=Ne[1];Object(r.useEffect)((function(){De()}),[]);var Te=Se?ne:ne.filter((function(e){return e.user.username===G.username}));Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);H(t),x.setToken(t.token),E(!1),Y(!0)}}),[]);var De=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getAll();case 3:t=e.sent,re(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message,"  this is fucking error message");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Le=function(){N(!1),D(!1),I(!0),E(!0),Y(!1),H(null),W(""),a(""),p(""),g(""),je(""),ue(""),fe(""),window.localStorage.clear()};G?console.log("zimbabue"):console.log("no user");var Pe=function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,r={name:n,username:u,password:m},u&&n){e.next=6;break}return setTimeout((function(){W(null)}),3e3),e.abrupt("return",W("Please fill out fields"));case 6:if(!(m.length<=5)){e.next=9;break}return setTimeout((function(){W(null)}),3e3),e.abrupt("return",W("Your password doesn`t match the criteria."));case 9:return e.next=11,v(r);case 11:Le(),setTimeout((function(){_(null)}),3e3),_("You registered succesfuly"),e.next=23;break;case 16:e.prev=16,e.t0=e.catch(1),setTimeout((function(){W(null)}),3e3),W("This username already exists"),a(""),p(""),g("");case 23:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O({username:u,password:m});case 4:if(n=e.sent,p(""),g(""),void 0!==n){e.next=10;break}return setTimeout((function(){W(null)}),3e3),e.abrupt("return",W("Invalid username or password"));case 10:E(!1),Y(!0),x.setToken(n.token),window.localStorage.setItem("loggedUser",JSON.stringify(n)),H(n),p(""),g(""),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),p(""),g("");case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={blog:le,title:ce,author:pe},e.prev=1,e.next=4,x.create(t);case 4:De(),ue(""),je(""),fe(""),me(!1),ye(!1),_("added successfully"),setTimeout((function(){_(null)})),e.next=22;break;case 14:e.prev=14,e.t0=e.catch(1),"Request failed with status code 404"===e.t0.message&&(W("Time expired"),setTimeout((function(){W(null)}),3e3)),ue(""),je(""),fe(""),W("Please fill out fields"),setTimeout((function(){W(null)}),3e3);case 22:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.deleteBlog(t);case 3:De(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),setTimeout((function(){W(null)}),3e3),W("error");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(e){if(G&&e.user.username===G.username)return Object(j.jsx)("div",{className:"deleteDiv",children:Object(j.jsx)("button",{onClick:function(){return Ue(e.id)},children:"delete"})})};return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsxs)("div",{children:[V?Object(j.jsxs)("div",{className:"errorDiv",children:[" ",Object(j.jsx)("p",{className:"errorMessage",children:V})]}):null,$?Object(j.jsx)("div",{className:"succesDiv",children:Object(j.jsx)("p",{className:"succesMessage",children:$})}):null]}),Object(j.jsxs)("div",{className:"formDiv",style:{display:A?"":"none"},children:[Object(j.jsx)("div",{className:"logo"}),Object(j.jsxs)("div",{className:"formsDivInside",children:[Object(j.jsx)("div",{style:{display:B?"":"none"},children:Object(j.jsx)("button",{onClick:function(){D(!0),N(!1),I(!1)},children:"Register"})}),Object(j.jsx)("div",{style:{display:B?"":"none"},children:Object(j.jsx)("button",{onClick:function(){N(!0),D(!1),I(!1)},children:"Login"})}),Object(j.jsx)("div",{style:{display:k?"":"none"},children:Object(j.jsx)(d,{username:u,password:m,handleLogin:Be,setUsername:p,setPassword:g})}),Object(j.jsx)("div",{style:{display:T?"":"none"},children:Object(j.jsx)(b,{name:n,username:u,password:m,handleRegister:Pe,setName:a,setUsername:p,setPassword:g})}),Object(j.jsx)("div",{style:{display:T||k?"":"none"},children:Object(j.jsx)("button",{onClick:function(){I(!0),D(!1),N(!1)},children:"Cansel"})})]})]}),Object(j.jsxs)("div",{className:"loginedUserDiv",style:{display:M?"":"none"},children:[Object(j.jsxs)("div",{className:"userNameDiv",children:[Object(j.jsx)("div",{className:"logo"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"loggedIn",children:[Object(j.jsxs)("p",{children:[G?G.name:null," is logged in"]}),Object(j.jsx)("p",{className:"username",children:G?G.username:null}),Object(j.jsx)("button",{onClick:function(){me(!0),ye(!1)},children:"Create Your Blog"}),Object(j.jsx)("button",{onClick:function(){Ce(!1)},children:"show your blog"}),Object(j.jsx)("button",{onClick:function(){Ce(!0)},children:"show all"})]}),Object(j.jsx)("button",{onClick:Le,children:"Log out"})]})]}),Object(j.jsxs)("div",{className:"createBlogDiv",children:[Object(j.jsxs)("div",{style:{display:he?"":"none"},children:[Object(j.jsx)("input",{placeholder:"Title",name:"title",value:ce,onChange:function(e){var t=e.target;return ue(t.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:function(){me(!1),ye(!0)},children:"Next"}),Object(j.jsx)("button",{onClick:function(){return me(!1)},children:"Cancel"})]}),Object(j.jsxs)("div",{style:{display:we?"":"none"},children:[Object(j.jsx)("textarea",{rows:"10",cols:"30",placeholder:"Blog",name:"blog",value:le,onChange:function(e){var t=e.target;return je(t.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:Ie,children:"add"}),Object(j.jsx)("button",{onClick:function(){ye(!1),me(!1)},children:"Cansel"})]})]})]}),Object(j.jsx)("div",{className:"blogsDiv1",children:Object(j.jsx)("ul",{children:Te.map((function(e){return Object(j.jsx)("div",{className:"blogsDiv",children:Object(j.jsxs)("li",{className:"blogsList",children:[Re(e),Object(j.jsx)("p",{className:"title",children:e.title}),Object(j.jsx)("p",{className:"blog",children:e.blog}),Object(j.jsxs)("p",{className:"author",children:["author ",e.user.username]})]},e.id)},e.id)}))})})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root")),w()}},[[43,1,2]]]);
//# sourceMappingURL=main.dd5cc2c3.chunk.js.map